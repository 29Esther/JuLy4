language: node_js
node_js:
  - 10
install:
- npm install
before_install:
- git submodule update --init --remote --recursive
script:
- hexo generate
after_script:
- git config --global user.email "yaojingshuihudie@163.com"
- git config --global user.name "29Esther"
- sed -i'' "/^ *repo/s~github\.com~${GH_TOKEN}@github.com~" _config.yml
- hexo deploy
- cd /home/travis/build/29Esther/JuLy4/.deploy_git/
- echo "esther.fun" > CNAME
- git add CNAME
- git commit -m "Add CNAME"
- git push https://${GH_TOKEN}@github.com/29Esther/29esther.github.io.git